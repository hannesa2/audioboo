<project name="dnsjava" basedir="." default="all">
    <property name="build_dir" value="${basedir}" />
    <property name="src_dir" value="${basedir}" />
    <property name="doc_dir" value="${basedir}/doc" />
    <property name="dist_dir" value="${basedir}" />
    <property name="version" value="1.6.6" />
    <property name="jarname" value="dnsjava-${version}.jar" />
    <property name="zipname" value="dnsjava-${version}.zip" />
    <property name="targzname" value="dnsjava-${version}.tar.gz" />

    <property name="j2se.javadoc" value="http://java.sun.com/j2se/1.4/docs/api/" />

    <target name="all" depends="jar" description="Compile and Jar"></target>

    <target name="compile" description="Compile everything">
        <javac debug="true" destdir="${build_dir}">
            <src path="${src_dir}" />
            <exclude name="org/xbill/DNS/security/*.java" />
        </javac>
    </target>

    <target name="dnssec" description="Compile the DNSSEC code">
        <javac debug="true" destdir="${build_dir}">
            <src path="${src_dir}" />
            <include name="org/xbill/DNS/security/*.java" />
        </javac>
    </target>

    <target name="jar" depends="compile" description="Makes dnsjava.jar">
        <jar basedir="${build_dir}" includes="**/*.class" jarfile="${dist_dir}/${jarname}">
            <manifest>
                <attribute name="Implementation-Title" value="dnsjava" />
                <attribute name="Implementation-Version" value="${version}" />
            </manifest>
        </jar>
    </target>

    <target name="clean" description="Remove old class files">
        <delete>
            <fileset dir="${build_dir}" includes="**/*.class" />
            <fileset dir="${build_dir}" includes="*.jar *.zip *.tar.gz" />
        </delete>
    </target>

    <target name="docs" description="Makes Javadoc documentation">
        <javadoc destdir="${doc_dir}" packagenames="org.xbill.DNS,org.xbill.DNS.utils,org.xbill.DNS.security"
            sourcepath="${src_dir}"
            windowtitle="dnsjava documentation">

            <link href="${j2se.javadoc}" />
        </javadoc>
    </target>

    <target name="docsclean" description="Remove old documentation">
        <delete dir="${doc_dir}" />
    </target>

    <property name="source_excludes" value="**/*.class,${jarname},${zipname},${targzname}" />

    <target name="sourcedist" depends="compile,docs" description="Builds source distributions">
        <zip destfile="${dist_dir}/${zipname}">
            <zipfileset dir="${src_dir}" excludes="${source_excludes}"
                prefix="dnsjava-${version}" />
        </zip>
        <tar compression="gzip" destfile="${dist_dir}/${targzname}">
            <tarfileset dir="${src_dir}" excludes="${source_excludes}"
                prefix="dnsjava-${version}" />
        </tar>
    </target>

</project>
